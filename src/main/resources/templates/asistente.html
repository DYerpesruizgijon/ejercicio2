<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Asistente Botánico IA</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      body {
        background-color: #f0f2f5;
      }
      .chat-card {
        border-radius: 15px;
        border: none;
        overflow: hidden;
      }
      .chat-header {
        background-color: #198754;
        color: white;
        padding: 20px;
      }
      .bot-bubble {
        background-color: #e2f3e5;
        border-radius: 15px 15px 15px 0;
        padding: 15px;
        border: 1px solid #c3e6cb;
        margin-bottom: 20px;
        color: #155724;
      }
      .user-input-section {
        background: white;
        padding: 25px;
        border-top: 1px solid #dee2e6;
      }
      .plant-icon {
        font-size: 1.5rem;
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
          <div class="card chat-card shadow-lg">
            <div class="chat-header text-center">
              <h4 class="mb-0">
                <i class="fas fa-robot"></i> Asistente Botánico
              </h4>
              <small>Inteligencia Artificial Mistral</small>
            </div>

            <div class="card-body p-4" style="min-height: 350px">
              <div class="bot-bubble">
                <i class="fas fa-leaf plant-icon"></i>
                ¡Hola! Soy tu experto botánico. Dime en qué ciudad o zona estás
                y te recomendaré 3 plantas ideales para ese lugar.
              </div>

              <div
                th:if="${respuesta}"
                class="bot-bubble shadow-sm animate__animated animate__fadeIn"
              >
                <p class="fw-bold mb-2">
                  Mis recomendaciones para
                  <span th:text="${ubicacionAnterior}"></span>:
                </p>
                <p
                  class="mb-0"
                  style="white-space: pre-line"
                  th:text="${respuesta}"
                ></p>
              </div>
            </div>

            <div class="user-input-section">
              <form th:action="@{/registro-planta/asistente}" method="get">
                <div class="input-group">
                  <input
                    type="text"
                    name="ubicacion"
                    class="form-control form-control-lg shadow-none"
                    placeholder="Escribe tu ciudad..."
                    th:value="${ubicacionAnterior}"
                    required
                  />
                  <button class="btn btn-success px-4" type="submit">
                    <i class="fas fa-paper-plane"></i>
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="text-center mt-4">
            <a th:href="@{/}" class="btn btn-outline-secondary">
              <i class="fas fa-home"></i> Volver al Inicio
            </a>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
